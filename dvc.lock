schema: '2.0'
stages:
  data_preparation:
    cmd: PYTHONPATH=. python src/data/prepare_data.py
    deps:
    - path: data/train.csv
      hash: md5
      md5: 80ccab65fb115cbad143dbbd2bcd5577
      size: 460676
    - path: src/data/prepare_data.py
      hash: md5
      md5: 3785fc0267c0eae950df34728ff34053
      size: 907
    params:
      params.yaml:
        selected_features:
        - RoofMatl
        - Condition2
        - KitchenQual
        - BsmtQual
        - GrLivArea
        - OverallQual
        - BsmtExposure
        - BldgType
        - SaleType
    outs:
    - path: data/train_data.joblib
      hash: md5
      md5: 60fbe9700b5358e294f87877d17f7cd0
      size: 84143
    - path: data/val_data.joblib
      hash: md5
      md5: deecd965035a98e2066095236569c3ee
      size: 22511
  hyperparameter_tuning:
    cmd: PYTHONPATH=. python src/models/tune_hyperparameters.py
    deps:
    - path: data/train_data.joblib
      hash: md5
      md5: 60fbe9700b5358e294f87877d17f7cd0
      size: 84143
    - path: src/models/pipeline.py
      hash: md5
      md5: b3984428733709d9221f50a41b637621
      size: 901
    - path: src/models/tune_hyperparameters.py
      hash: md5
      md5: 336398969439ce3b35563d2413db3cc9
      size: 2494
    params:
      params.yaml:
        hyperparameter_tuning:
          n_trials: 15
          n_estimators:
            low: 50
            high: 1000
          max_depth:
            low: 3
            high: 15
          learning_rate:
            low: 0.001
            high: 0.3
    outs:
    - path: models/best_params.json
      hash: md5
      md5: 7525a478a8fdeead8e2da037d17c8a73
      size: 76
  train:
    cmd: PYTHONPATH=. python src/models/train_model.py
    deps:
    - path: data/train_data.joblib
      hash: md5
      md5: 60fbe9700b5358e294f87877d17f7cd0
      size: 84143
    - path: models/best_params.json
      hash: md5
      md5: 7525a478a8fdeead8e2da037d17c8a73
      size: 76
    - path: src/models/pipeline.py
      hash: md5
      md5: b3984428733709d9221f50a41b637621
      size: 901
    - path: src/models/train_model.py
      hash: md5
      md5: b6eb4ddb6dd7732ba0a76db2d389f2b5
      size: 1823
    outs:
    - path: models/pipeline.joblib
      hash: md5
      md5: 73e2a0345b6ffd86752cb0b7cbe1bf9e
      size: 13812307
  evaluate:
    cmd: PYTHONPATH=. python src/models/evaluate_model.py
    deps:
    - path: data/val_data.joblib
      hash: md5
      md5: deecd965035a98e2066095236569c3ee
      size: 22511
    - path: models/pipeline.joblib
      hash: md5
      md5: 73e2a0345b6ffd86752cb0b7cbe1bf9e
      size: 13812307
    - path: src/models/evaluate_model.py
      hash: md5
      md5: d3190b0e431da0147a8a6af293b2f8d5
      size: 1350
    outs:
    - path: models/metrics.json
      hash: md5
      md5: 84ad0485bc170c6da1712cb65bd09100
      size: 74
